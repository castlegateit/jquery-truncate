!function(h){"use strict";function e(t,e){this.element=t,this.settings=h.extend({},n,e),this._defaults=n,this._name=i,this.init()}var t,i="truncate",s=i+"ResizeDone",n={lines:!1};e.prototype.init=function(){var t=this;t.text=h(t.element).text(),h(window).on(s,function(){t.truncate()}),t.truncate()},e.prototype.truncate=function(){if(!h(this.element).is(":hidden")){for(this.reset(),this.measure(),h(this.element).empty();this.lines.length<this.maxLines;)this.createLine();this.updateLastLine()}},e.prototype.reset=function(){h(this.element).text(this.text),this.words=this.text.split(" "),this.lines=[]},e.prototype.measure=function(){var t=h(this.element);this.width=t.width(),this.maxLines=this.settings.lines,this.maxLines||(this.maxLines=Math.floor(t.height()/parseInt(t.css("line-height"),10)))},e.prototype.createLine=function(){var t,e,i=h("<span>").css("white-space","nowrap");h(this.element).append(i," ");for(var s=0,n=this.words.length;s<n;s++)if(t=i.text(),e=this.words.shift(),i.text(t+e+" "),i.width()>this.width){i.text(t),this.words.unshift(e);break}this.lines.push(i)},e.prototype.updateLastLine=function(){var t=this.lines[this.lines.length-1];0!==this.words.length&&t.text(t.text()+" "+this.words.join(" ")).css({display:"block",overflow:"hidden",textOverflow:"ellipsis",width:this.width})},h.fn[i]=function(t){return this.each(function(){h.data(this,i)||h.data(this,i,new e(this,t))})},h(window).on("resize",function(){window.clearTimeout(t),t=window.setTimeout(function(){h(window).trigger(s)},50)})}(jQuery);
!function(t){"use strict";var e,i="truncate",s=i+"ResizeDone",n={lines:!1},h=function(e,s){this.element=e,this.settings=t.extend({},n,s),this._defaults=n,this._name=i,this.init()};h.prototype.init=function(){var e=this;e.text=t(e.element).text(),t(window).on(s,function(){e.truncate()}),e.truncate()},h.prototype.truncate=function(){if(!t(this.element).is(":hidden")){for(this.reset(),this.measure(),t(this.element).empty();this.lines.length<this.maxLines;)this.createLine();this.updateLastLine()}},h.prototype.reset=function(){t(this.element).text(this.text),this.words=this.text.split(" "),this.lines=[]},h.prototype.measure=function(){var e=t(this.element);this.width=e.width(),this.maxLines=this.settings.lines,this.maxLines||(this.maxLines=Math.floor(e.height()/parseInt(e.css("line-height"),10)))},h.prototype.createLine=function(){var e,i,s=t("<span>").css("white-space","nowrap");t(this.element).append(s," ");for(var n=0,h=this.words.length;n<h;n++)if(e=s.text(),i=this.words.shift(),s.text(e+i+" "),s.width()>this.width){s.text(e),this.words.unshift(i);break}this.lines.push(s)},h.prototype.updateLastLine=function(){var t=this.lines[this.lines.length-1];0!==this.words.length&&t.text(t.text()+" "+this.words.join(" ")).css({display:"block",overflow:"hidden",textOverflow:"ellipsis",width:this.width})},t.fn[i]=function(e){return this.each(function(){t.data(this,i)||t.data(this,i,new h(this,e))})},t(window).on("resize",function(){window.clearTimeout(e),e=window.setTimeout(function(){t(window).trigger(s)},50)})}(jQuery);